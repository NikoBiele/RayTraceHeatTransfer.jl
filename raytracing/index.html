<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Ray trace the geometry · Documentation</title><meta name="title" content="Ray trace the geometry · Documentation"/><meta property="og:title" content="Ray trace the geometry · Documentation"/><meta property="twitter:title" content="Ray trace the geometry · Documentation"/><meta name="description" content="Documentation for Documentation."/><meta property="og:description" content="Documentation for Documentation."/><meta property="twitter:description" content="Documentation for Documentation."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="Documentation logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../gettingstarted/">Getting started</a></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../geometry/">Generate and mesh geometry</a></li><li class="is-active"><a class="tocitem" href>Ray trace the geometry</a></li><li><a class="tocitem" href="../heattransfer/">Calculate heat transfer</a></li><li><a class="tocitem" href="../viewfactor/">View Factors in 3D</a></li></ul></li><li><a class="tocitem" href="../validation/">Code Validation</a></li><li><a class="tocitem" href="../code/">Code</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Usage</a></li><li class="is-active"><a href>Ray trace the geometry</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Ray trace the geometry</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NikoBiele/RayTraceHeatTransfer.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NikoBiele/RayTraceHeatTransfer.jl/blob/main/docs/src/raytracing.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h3 id="Ray-trace-the-geometry"><a class="docs-heading-anchor" href="#Ray-trace-the-geometry">Ray trace the geometry</a><a id="Ray-trace-the-geometry-1"></a><a class="docs-heading-anchor-permalink" href="#Ray-trace-the-geometry" title="Permalink"></a></h3><p>In the previous section the geometry was created. Now it is time to sample the geometry. This package works by sampling every element of the entire geometry a specified number of times. This sampling process generates &#39;exchange factor&#39; matrices. The exchange factors describe the connectivity of the domain. This connectivity depends on the properties of the participating medium (the enclosed gas).</p><p>The first thing we need to do is to specify the properties of the participating medium. This is done by speciying the scattering coefficient and the absorption coefficient and generating an instance of the GasProperties type.</p><pre><code class="language-julia hljs">sigma_s = 0.0 # scattering coefficient
kappa = 1.0 # absorption coefficient
gas1 = GasProperties(sigma_s,kappa)</code></pre><p>Then we specify the total number of rays that should be traced in the domain. More rays give a more accurate result but is also more computationally demanding. Here we choose 10 million rays.</p><pre><code class="language-julia hljs">N_rays_tot = 10_000_000</code></pre><p>Then we divide these rays among the total number of elements in the domain</p><pre><code class="language-julia hljs">N_rays = trunc(Int, N_rays_tot/(mesh1.N_vols+mesh1.N_surfs))</code></pre><p>The sampling process gives the user the option of viewing the ray tracing &#39;live&#39; as it takes place. This option is however very computationally demanding and must execute single threaded. Therefore, if enabling this option, only a few rays should be sampled from each emitter. But we will leave this option turned off.</p><pre><code class="language-julia hljs">displayWhileTracing = false</code></pre><p>Next we make the calculation run in parallel on all available threads. This is done to accelerate the ray tracing. The ray tracing can run in parallel on any number of threads.</p><pre><code class="language-julia hljs">if displayWhileTracing
    nthreads = 1
else
    nthreads = Threads.nthreads()
end</code></pre><p>Lastly we sample the domain and time the entire process. This sampling process generates the exchange factor matrices. The sampling function prints its progress to the Julia REPL.</p><pre><code class="language-julia hljs">@time begin
    println(&quot;Starting ray tracing of $N_rays_tot ray bundles in total ($N_rays per emitter):&quot;)
    FSS, FSG, FGS, FGG = sampleDomain(mesh1,gas1,N_rays,nthreads,displayWhileTracing)
    println(&quot;Ray tracing finished, the total time elapsed was:&quot;)
end;</code></pre><p>Now that the domain has been sampled and the exchange factors has been statistically measured the next step is to solve heat transfer problems.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../geometry/">« Generate and mesh geometry</a><a class="docs-footer-nextpage" href="../heattransfer/">Calculate heat transfer »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Friday 5 April 2024 21:30">Friday 5 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
