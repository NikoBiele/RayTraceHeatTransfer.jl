<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Code Validation · Documentation</title><meta name="title" content="Code Validation · Documentation"/><meta property="og:title" content="Code Validation · Documentation"/><meta property="twitter:title" content="Code Validation · Documentation"/><meta name="description" content="Documentation for Documentation."/><meta property="og:description" content="Documentation for Documentation."/><meta property="twitter:description" content="Documentation for Documentation."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="Documentation logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../gettingstarted/">Getting started</a></li><li><span class="tocitem">Usage</span><ul><li><a class="tocitem" href="../geometry/">Generate and mesh geometry</a></li><li><a class="tocitem" href="../raytracing/">Ray trace the geometry</a></li><li><a class="tocitem" href="../heattransfer/">Calculate heat transfer</a></li><li><a class="tocitem" href="../viewfactor/">View Factors in 3D</a></li></ul></li><li class="is-active"><a class="tocitem" href>Code Validation</a></li><li><a class="tocitem" href="../code/">Code</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Code Validation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Code Validation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NikoBiele/RayTraceHeatTransfer.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NikoBiele/RayTraceHeatTransfer.jl/blob/main/docs/src/validation.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h3 id="Code-validation"><a class="docs-heading-anchor" href="#Code-validation">Code validation</a><a id="Code-validation-1"></a><a class="docs-heading-anchor-permalink" href="#Code-validation" title="Permalink"></a></h3><p>This section will compare results generated by this package with an analytical solution in order to validate the correctness of the code. This section essentially goes through all of the steps performed by the function &quot;validCrosbieSchrenker&quot;. We start by loading the package.</p><pre><code class="language-julia hljs">using RayTraceHeatTransfer</code></pre><p>The geometry is built by a number of non-overlapping sub-enclosures. The sub-enclosures are specified like this so that the meshing and ray tracing can be done in a general way. Here we define a 1x1 square (a single sub-enclosure).</p><pre><code class="language-julia hljs"># now we need to know the Coordinates of all the points in the enclosure
# define a vector of SubEnclosures
subs = SubEnclosure[]

# make a SubEnclosure and push it into the vector
sub1 = SubEnclosure([0.0, 0.0],[1.0, 0.0],[1.0, 1.0],[0.0, 1.0],true,true,true,true)
push!(subs, sub1)</code></pre><p>Now that our bounding geometry has been defined, it is time to mesh it. We mesh it by specifying the number of splits in the x- and y-direction. Then we generate the meshing automatically and plot it.</p><pre><code class="language-julia hljs"># generate mesh
Ndim = 51
mesh1 = RayTracingMesh(subs,Ndim);
# plot the geometry
displayMesh(mesh1)</code></pre><p>Viewing the result:</p><p><img src="../meshedGeometry.png" alt="plot"/></p><p>Now our geometry is defined by the &#39;mesh1&#39; struct.</p><h3 id="Monte-Carlo-ray-tracing"><a class="docs-heading-anchor" href="#Monte-Carlo-ray-tracing">Monte Carlo ray tracing</a><a id="Monte-Carlo-ray-tracing-1"></a><a class="docs-heading-anchor-permalink" href="#Monte-Carlo-ray-tracing" title="Permalink"></a></h3><p>Now that our geometry is in place, it is time to ray trace the domain. First we define the properties of our participating medium and store them in &#39;gas1&#39;:</p><pre><code class="language-julia hljs">sigma_s = 0.0 # scattering coefficient
kappa = 1.0 # absorption coefficient
gas1 = GasProperties(sigma_s,kappa)</code></pre><p>Then we ray trace and save the results in exchange factor matrices:</p><pre><code class="language-julia hljs">displayWhileTracing = false # option to view the rays while they are traced (warning: very demanding)
N_rays_tot = 10_000_000; # total number of rays
# number of rays to trace from each zone
N_rays = trunc(Int, N_rays_tot/(mesh1.N_surfs+mesh1.N_vols))

# We execute the calculation in parallel on all available threads
nthreads = Threads.nthreads()

# then we ray trace the domain to get the exchange factor matrices
FSS, FSG, FGS, FGG = sampleDomain(mesh1,gas1,N_rays,nthreads,displayWhileTracing)</code></pre><h3 id="Solve-heat-transfer-problem-for-steady-state-temperature-distribution"><a class="docs-heading-anchor" href="#Solve-heat-transfer-problem-for-steady-state-temperature-distribution">Solve heat transfer problem for steady state temperature distribution</a><a id="Solve-heat-transfer-problem-for-steady-state-temperature-distribution-1"></a><a class="docs-heading-anchor-permalink" href="#Solve-heat-transfer-problem-for-steady-state-temperature-distribution" title="Permalink"></a></h3><p>Now it is time to solve heat transfer problems on the domain defined by our geometry. First we fix the wall temperatures and set the initial gas temperatures. Then we solve for the steady state.</p><pre><code class="language-julia hljs"># define boundary conditions

# define which wall temperatures are fixed
# we only need to set those which should be fixed
# those which are set to negative will be interpreted as unknown
Tw_hot = 1000.0
qw_in = zeros(mesh1.N_subs,4)

# set the emissivities
epsw_in = ones(mesh1.N_subs,4)

# gas initial temperatures, set temperatures on a sub enclosure basis
Tg_in = zeros(mesh1.N_subs) .- 1 # unknown gas temperature
qg_in = zeros(mesh1.N_subs) # radiative equilibrium

# test bottom wall emissions
Tw_in = zeros(mesh1.N_subs,4)
Tw_in[1,1] = Tw_hot # bottom wall
println(&quot;Calculating steady state temperature distribution (bottom wall emitter).&quot;)
Tw, Tg, qw, qg = steadyState(mesh1,FSS,FSG,FGS,FGG,
                            epsw_in,gas1,Tw_in,Tg_in,qw_in,qg_in);</code></pre><p>Now let&#39;s rearrange our gas volume temperature vector into the square of squares that it represents and plot them all:</p><pre><code class="language-julia hljs">Tg_matrix = plotTemperatureField(mesh1,Tg) #,Tw); # optional wall temperatures</code></pre><p>Giving:</p><p><img src="../temperaturedistribution.png" alt="plot"/></p><p>As the last step, we also validate the code against the analytical solution of Crosbie and Schrenker (1982). Plotting the (Tg/Tw)^4 for the centerline perpendicular to the incident radiation and comparing it to the analytical solution gives:</p><p><img src="../validation.png" alt="plot"/></p><p>Which is not perfect, but still quite close considering that we only traced 10 million rays in total. Increasing the number of rays to 1 billion and repeating gives:</p><p><img src="../temperaturedistribution_oneBillion.png" alt="plot"/></p><p><img src="../validation_oneBillion.png" alt="plot"/></p><p>Decreasing the number of subdivisions (Ndim) would further increase the accuracy.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../viewfactor/">« View Factors in 3D</a><a class="docs-footer-nextpage" href="../code/">Code »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Saturday 6 April 2024 21:36">Saturday 6 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
